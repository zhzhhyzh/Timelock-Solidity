<!DOCTYPE html>
<html>

<head>
  <title>Transaction</title>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.2.7-rc.0/web3.min.js"></script>

  <link rel="stylesheet" href="../styles/main.css" />
  <link rel="stylesheet" href="../styles/navbar.css" />

  <script src="https://unpkg.com/ionicons@5.1.2/dist/ionicons.js"></script>
</head>

<body>
  <div class="body-pd">
    <div class="l-navbar" id="navbar">
      <nav class="nav">
        <div>
          <div class="nav__brand">
            <ion-icon name="menu-outline" class="nav__toggle" id="nav-toggle"></ion-icon>
            <a href="#" class="nav__logo">Timelock</a>
          </div>

          <div class="nav__link collapse">
            <ion-icon name="key-outline" class="nav__icon"></ion-icon>
            <span class="nav__name">Accounts</span>

            <ion-icon name="chevron-down-outline" class="collapse__link"></ion-icon>

            <ul class="collapse__menu">
              <a href="../accountManager/create.html" class="collapse__sublink">Create</a>
              <a href="../accountManager/find.html" class="collapse__sublink">Search</a>
              <a href="../accountManager/list.html" class="collapse__sublink">List</a>
              <a href="../accountManager/purge.html" class="collapse__sublink">Purge</a>
            </ul>
          </div>
          <div class="nav__link collapse">
            <ion-icon name="cash-outline" class="nav__icon"></ion-icon>

            <span class="nav__name">Deposit</span>

            <ion-icon name="chevron-down-outline" class="collapse__link"></ion-icon>

            <ul class="collapse__menu">
              <a href="../deposit/create.html" class="collapse__sublink">Deposit</a>
              <a href="../deposit/withdraw.html" class="collapse__sublink">Withdrawal</a>
              <a href="../deposit/myDeposit.html" class="collapse__sublink">Balance Enquiry</a>
              <a href="../deposit/find.html" class="collapse__sublink">Other Acc Balances</a>

            </ul>
          </div>
          <div class="nav__link collapse active">
            <ion-icon name="lock-open-outline" class="nav__icon"></ion-icon>
            <span class="nav__name">Timelock</span>

            <ion-icon name="chevron-down-outline" class="collapse__link"></ion-icon>

            <ul class="collapse__menu">
              <a href="../timelock/list.html" class="collapse__sublink">List</a>
              <a href="../timelock/queue.html" class="collapse__sublink">Queue</a>
              <a href="../timelock/execute.html" class="collapse__sublink">Execute</a>
              <a href="../timelock/cancel.html" class="collapse__sublink">Cancel</a>

            </ul>
          </div>
         


        </div>
    </div>


    </nav>
  </div>
  </div>

  <form onsubmit="return false">
    <div class="container">
      <h1>Queue Transaction</h1>
      <p>Please fill in this form to queue transaction.</p>

      <label for="sender"><b>Sender Address</b></label>
      <input type="text" name="sender"  placeholder=" " readonly  />
      <label for="address"><b>Target Address</b></label>
      <input type="text" name="address" placeholder="Enter Target Address" required />
      <label for="_value"><b>Transaction Amount</b> <b> (ETH)</b></label>
      <input type="text" name="_value" placeholder="Enter Transaction Amount" required />
      <!-- <label for="_value"><b>Automated execution?</b></label><br>
        <input type="checkbox"  name="automation" value="true"  /><br> -->
        <label for="address"><b>Execution Date & Time</b></label>

        <div class="datetimepicker">
          <input type="date" id="date" name="endDate" required>
          <span></span>
          <input type="time" id="time" name="endTime" required>
        </div>
    
      <label for="txId"><b>Generated Transaction Id</b></label>
      <input type="text" readonly name="txId" placeholder=" " />


      <div class="clearfix">
        <button onclick="_queuefunction()" class="btn">Queue</button>
      </div>
    </div>
  </form>
  <div class="avatars" id="accounts">
    <!-- <a href="#" onclick="switchAccount(0)" class="avatars__item"
      ><img
        class="avatar"
        src="https://randomuser.me/api/portraits/women/65.jpg"
        alt=""
    /></a>
    <a href="#" onclick="switchAccount(1)" class="avatars__item"
      ><img
        class="avatar"
        src="https://randomuser.me/api/portraits/men/25.jpg"
        alt=""
    /></a>
    <a href="#" onclick="switchAccount(2)" class="avatars__item"
      ><img
        class="avatar"
        src="https://randomuser.me/api/portraits/women/25.jpg"
        alt=""
    /></a> -->
  </div>
</body>
<script>
  let _queuefunction = async () => {

    let address = document.forms[0].address.value;
    let _value = document.forms[0]._value.value;
    let endDate = document.forms[0].endDate.value;
    let endTime = document.forms[0].endTime.value;
    await queue(address, _value*(10**18), convertDateToUnixTimestamp(endDate + " "+endTime));


  };

  setTimeout(()=>{
    document.forms[0].sender.value = account;

  },1000)

  
</script>


<script src="../scripts/timeLock.js"></script>
<script src="../scripts/common.js"></script>

<script src="../scripts/config.js"></script>
<script src="../scripts/navbar.js"></script>
<script src="../scripts/automation.js"></script>


</html>